<a href="http://php.net/manual/en/function.filter-input.php" title="http://php.net/manual/en/function.filter-input.php" target="_blank">filter-input</a> provides the proper way of accessing $_SERVER (and other)

<pre><span style='color:#5f5035;'>&lt;?php</span><span style='color:#000000;'></span>
<span style='color:#000000;'></span>
<span style='color:#797997;'>$ips</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#808030;'>[</span><span style='color:#000000;'></span>
<span style='color:#000000;'>filter_input</span><span style='color:#808030;'>(</span><span style='color:#000000;'>INPUT_SERVER</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'HTTP_X_FORWARDED_FOR'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> FILTER_SANITIZE_SPECIAL_CHARS</span><span style='color:#808030;'>)</span><span style='color:#000000;'></span>
<span style='color:#808030;'>,</span><span style='color:#000000;'>filter_input</span><span style='color:#808030;'>(</span><span style='color:#000000;'>INPUT_SERVER</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'REMOTE_ADDR'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> FILTER_SANITIZE_SPECIAL_CHARS</span><span style='color:#808030;'>)</span><span style='color:#000000;'></span>
<span style='color:#808030;'>,</span><span style='color:#000000;'>filter_input</span><span style='color:#808030;'>(</span><span style='color:#000000;'>INPUT_SERVER</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'HTTP_CLIENT_IP'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> FILTER_SANITIZE_SPECIAL_CHARS</span><span style='color:#808030;'>)</span><span style='color:#000000;'></span>
<span style='color:#808030;'>]</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span>
<span style='color:#000000;'></span>
<span style='color:#797997;'>$ips</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#400000;'>array_filter</span><span style='color:#808030;'>(</span><span style='color:#797997;'>$ips</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>function</span><span style='color:#808030;'>(</span><span style='color:#797997;'>$ip</span><span style='color:#808030;'>)</span><span style='color:#800080;'>{</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>return</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>null</span><span style='color:#000000;'> </span><span style='color:#808030;'>!</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$ip</span><span style='color:#800080;'>;</span><span style='color:#000000;'> </span><span style='color:#800080;'>}</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span>
<span style='color:#000000;'></span>
<span style='color:#800000;font-weight:bold; '>echo</span><span style='color:#000000;'> json_encode</span><span style='color:#808030;'>(</span><span style='color:#400000;'>array_values</span><span style='color:#808030;'>(</span><span style='color:#797997;'>$ips</span><span style='color:#808030;'>)</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'></span>
<span style='color:#000000;'></span>
<span style='color:#5f5035;'>?></span>
</pre>', 'PHP Proper Coding - Avoiding Access The Global Variables