<!DOCTYPE html>
<html encoding="UTF-8" charset="UTF-8" dir="ltr" lang="en-US" xml:lang="en-US" language="English" itemscope="" itemtype="http://schema.org/WebPage" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">

<head>
<!-- ╔════════════════════════════════════════════════╗
     ║ favor latest IE with Chrome-Frame if possible. ║
     ╚════════════════════════════════════════════════╝ -->
  <meta http-equiv="X-UA-Compatible"                   content="IE=edge,chrome=1"                                      />
<!-- ╔════════════════════════════════════════════════════════════╗
     ║ normalize script/style engine with explicit character-set. ║
     ╚════════════════════════════════════════════════════════════╝ -->
  <meta charset="UTF-8"                                                                                                />
  <meta http-equiv="content-type"                      content="text/html;charset=UTF-8"                               />
  <meta http-equiv="Content-Script-Type"               content="text/javascript;charset=UTF-8"                         />
  <meta http-equiv="Content-Style-Type"                content="text/css;charset=UTF-8"                                />
<!-- ╔══════════════════════════════════════════════╗
     ║ bread and butter of mobile-friendly website. ║
     ╚══════════════════════════════════════════════╝ -->
  <meta name="viewport"                                content="width=device-width,initial-scale=1.0,shrink-to-fit=no,minimal-ui"                                           />
<!-- ╔════════════════════════════╗
     ║ poor's man's HTTP-Headers. ║
     ╚════════════════════════════╝ -->
  <meta http-equiv="Feature-Policy"                    content="fullscreen *; wake-lock *; vibrate *; geolocation *;"  />
  <meta http-equiv="Cache-Control"                     content="public,max-age=1800,max-stale,stale-while-revalidate=86400,stale-if-error=259200" rem="max-age=30minutes"   />
  <meta http-equiv="X-Content-Type-Options"            content="nosniff"                                               />
  <meta http-equiv="X-DNS-Prefetch-Control"            content="on"                                                    />
<!-- needs more work... 
  <meta http-equiv="Content-Security-Policy"           content="default-src 'none'; base-uri 'self'; block-all-mixed-content; connect-src 'self' icompile.eladkarako.com eladkarako.com eladkarako.github.io www.google.com www.google-analytics.com www.googletagmanager.com www.github.com gist.github.com gist.githubusercontent.com; font-src github.githubassets.com; form-action 'none; frame-ancestors 'self'; frame-src 'self' render.githubusercontent.com gist.github.com; img-src 'self' *.imgur.com data: *.githubusercontent.com; media-src 'none'; script-src 'self' github.githubassets.com; style-src 'unsafe-inline' github.githubassets.com; worker-src 'none'"                                                                                                         />
-->  
  <meta http-equiv="X-XSS-Protection"                  content="1; mode=block"                                         />
<!-- ╔════════════════════════════════════╗
     ║ disable browser annoying features. ║
     ╚════════════════════════════════════╝ -->
  <meta name="format-detection"                        content="telephone=no,date=no,address=no,email=no,url=no"       />
  <meta http-equiv="imagetoolbar"                      content="no"                                                    />
  <meta http-equiv="cleartype"                         content="on"                                                    />
  <meta http-equiv="Page-Enter"                        content="RevealTrans(Duration=0.0,Transition=0.0)"              />
  <meta http-equiv="Page-Exit"                         content="RevealTrans(Duration=0.0,Transition=0.0)"              />
  <!-----------------------------------------------------------------------do not modify line below here, an installed skype read it AS IS (you need to make the HTML is UTF-8 (no BOM) with Windown EOL). -->
  <meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE">
  <!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<!-- ╔══════════════════════════════════╗
     ║ compatible with viewport for IE. ║
     ╚══════════════════════════════════╝ -->
  <meta name="HandheldFriendly"                        content="True"              />
  <meta name="MSThemeCompatible"                       content="no"                />
  <meta name="theme-color"                             content="#b1cff4"           />
  <meta name="mssmarttagspreventparsing"               content="true"              />
  <meta name="apple-mobile-web-app-capable"            content="yes"               />
  <meta name="apple-mobile-web-app-status-bar-style"   content="translucent black" />
  <meta name="msapplication-navbutton-color"           content="translucent black" />
<!-- ╔══════════╗
     ║ audience ║
     ╚══════════╝ -->
  <meta name="target"                                  content="all"               />
  <meta name="audience"                                content="all"               />
  <meta name="coverage"                                content="Worldwide"         />
  <meta name="distribution"                            content="Global"            />
  <meta name="rating"                                  content="safe for kids"     />
<!-- ╔══════════╗
     ║ language ║
     ╚══════════╝ -->
  <meta http-equiv="Content-Language"                  content="en-US"             />
  <meta property="og:locale"                           content="en_US"             />
  <meta name="language"                                content="English"           />
  <meta name="og:type"                                 content="article"           />
<!-- ╔═══════════════════════════════╗
     ║ site-name and author contact. ║
     ╚═══════════════════════════════╝ -->
  <meta property="og:site_name"                        content="iCompile"          />
  <meta name="article:author"                          content="Elad Karako"       />
  <meta name="author"                                  content="Elad Karako"       />
  <meta name="owner"                                   content="Elad Karako"       />
  <meta name="contactName"                             content="Elad Karako"       />
  <meta name="dcterms.creator"                         content="Elad Karako"       />
  <link rel="me"                                       href="https://github.com/eladkarako/"  type="text/html"  />
  <link rel="author"                                   href="https://github.com/eladkarako/"                    />
  <link rel="profile"                                  href="https://gmpg.org/xfn/11"                           />
  <meta name="dcterms.type"                            content="Text"              />
  <meta name="dcterms.format"                          content="text/html"         />  
<!-- ╔═════════════════════════════════════╗
     ║ specific page information - title . ║
     ╚═════════════════════════════════════╝ -->
  <title>Fast download and parse http-archive requests file</title>
  <meta itemprop="name"                                content="Fast download and parse http-archive requests file"       />
  <meta name="dcterms.title"                           content="Fast download and parse http-archive requests file"       />
  <meta property="og:title"                            content="Fast download and parse http-archive requests file"       />
  <meta name="twitter:title"                           content="Fast download and parse http-archive requests file"       />
  <meta name="twitter:text:title"                      content="Fast download and parse http-archive requests file"       />
  <meta name="application-name"                        content="Fast download and parse http-archive requests file"       />
  <meta name="subject"                                 content="Fast download and parse http-archive requests file"       />
  <meta name="apple-mobile-web-app-title"              content="Fast download and parse http-archive requests file"       />
  <meta name="msapplication-tooltip"                   content="Fast download and parse http-archive requests file"       />
<!-- ╔══════════════════════════════════════════════════════════════╗
     ║ specific page information - description (title is fine too). ║
     ╚══════════════════════════════════════════════════════════════╝ -->
  <meta name="description"                             content="Fast download and parse http-archive requests file"       />
  <meta itemprop="description"                         content="Fast download and parse http-archive requests file"       />
  <meta name="dcterms.description"                     content="Fast download and parse http-archive requests file"       />
  <meta name="twitter:description"                     content="Fast download and parse http-archive requests file"       />
  <meta property="og:description"                      content="Fast download and parse http-archive requests file"       />
<!-- ╔═══════════╗
     ║ keywords. ║
     ╚═══════════╝ -->
  <meta property="keywords"                            content="accept,agent,alignnone,alive,apache,archive,archives,assets,assumes,auto,automated,avgdata,avgtext,based,bash,blog,bodybar,bytes,cache,cars,carscom,change,check,chmod,cleanup,command,comment,compatible,compiled,compressed,connection,content,control,copy,corrupted,create,creation,csvheader,curl,cygwin,data,date,december,default,deflate,desktop,details,download,downloading,downloads,dummy,easily,easy,echo,editor,editplus,elapsed,encoding,engine,enter,esource,etag,exepath,exit,expage,expires,export,extract,extracting,fast,feel,fgrep,field,file,files,filter,firsthtml,firstreq,fixed,folder,forget,format,found,free,fully,gave,github,grep,gzip,handle,header,headers,helps,hmmm,host,hosts,httparchive,idea,image,includes,increment,initiator,input,inputs,interested,items,jpeg,karako,language,latest,latin,length,line,lines,linux,location,major,make,marking,massive,massrequest,match,maxresident,method,mimetype,minor,minutes,modified,modify,month,months,move,mozilla,msie,multi,myisam,mysql,needed,note,notepad,null,oldifs,open,original,output,outputs,pagefaults,pageid,parallel,parse,parser,parsing,partial,paste,perl,powered,pragma,prefix,press,primary,process,ptst,python,query,range,ranges,rate,rbscom,read,redirecturl,referer,releases,remove,removed,removing,rename,reqbodysize,request,requestid,requests,resp,respsize,sample,schema,scheme,script,secondary,separated,server,shell,shift,site,size,sizes,slider,smaller,sort,status,step,strings,strong,surl,swaps,system,table,takes,taking,tase,tasecoil,testing,tinyint,transfer,tree,trident,trimming,trunk,trunked,trusted,tuoitre,tuoitrevn,type,unsigned,untrimmed,update,urlshort,user,users,valid,varchar,vary,vmware,vmwarecom,window,windows,work,working,yola,yolacdn,yolacom,zcat,eladkarako,eladkarakomod,icompile,Elad Karako,Karako Elad,אלעד קרקו,קרקו אלעד,קרקו"    />
  <meta property="article:tag"                         content="accept,agent,alignnone,alive,apache,archive,archives,assets,assumes,auto,automated,avgdata,avgtext,based,bash,blog,bodybar,bytes,cache,cars,carscom,change,check,chmod,cleanup,command,comment,compatible,compiled,compressed,connection,content,control,copy,corrupted,create,creation,csvheader,curl,cygwin,data,date,december,default,deflate,desktop,details,download,downloading,downloads,dummy,easily,easy,echo,editor,editplus,elapsed,encoding,engine,enter,esource,etag,exepath,exit,expage,expires,export,extract,extracting,fast,feel,fgrep,field,file,files,filter,firsthtml,firstreq,fixed,folder,forget,format,found,free,fully,gave,github,grep,gzip,handle,header,headers,helps,hmmm,host,hosts,httparchive,idea,image,includes,increment,initiator,input,inputs,interested,items,jpeg,karako,language,latest,latin,length,line,lines,linux,location,major,make,marking,massive,massrequest,match,maxresident,method,mimetype,minor,minutes,modified,modify,month,months,move,mozilla,msie,multi,myisam,mysql,needed,note,notepad,null,oldifs,open,original,output,outputs,pagefaults,pageid,parallel,parse,parser,parsing,partial,paste,perl,powered,pragma,prefix,press,primary,process,ptst,python,query,range,ranges,rate,rbscom,read,redirecturl,referer,releases,remove,removed,removing,rename,reqbodysize,request,requestid,requests,resp,respsize,sample,schema,scheme,script,secondary,separated,server,shell,shift,site,size,sizes,slider,smaller,sort,status,step,strings,strong,surl,swaps,system,table,takes,taking,tase,tasecoil,testing,tinyint,transfer,tree,trident,trimming,trunk,trunked,trusted,tuoitre,tuoitrevn,type,unsigned,untrimmed,update,urlshort,user,users,valid,varchar,vary,vmware,vmwarecom,window,windows,work,working,yola,yolacdn,yolacom,zcat,eladkarako,eladkarakomod,icompile,Elad Karako,Karako Elad,אלעד קרקו,קרקו אלעד,קרקו"    />
<!-- ╔════════════════════════════════════════════════╗
     ║ relation: next/previous/first/last pages.      ║
     ║ (although not advised a single page-article).  ║
     ╚════════════════════════════════════════════════╝ -->
  <link rel="start"                                       href="https://icompile.eladkarako.com/show-hidden-devices-in-windows-device-manager"       />
  <link rel="prev"                                        href="https://icompile.eladkarako.com/free-social-networking-icon-set"    />
  <link rel="previous"                                    href="https://icompile.eladkarako.com/free-social-networking-icon-set"    />
  <link rel="next"                                        href="https://icompile.eladkarako.com/13-31-113-131-311-prime-numbers"        />
  <link rel="last"                                        href="https://icompile.eladkarako.com/shealth"        />
  <link rel="up"                                          href="https://icompile.eladkarako.com/" />
  <base target="_top"                                     href="https://icompile.eladkarako.com/" />
<!-- ╔══════╗
     ║ URL. ║
     ╚══════╝ -->
  <link rel="canonical"                                   href="https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"         />
  <meta property="og:url"                              content="https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"         />
  <meta name="twitter:url"                             content="https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"         />
  <meta name="identifier-URL"                          content="https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"         />
  <meta name="msapplication-starturl"                  content="https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"         />
  <meta name="dcterms.identifier"                      content="https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"         />
<!-- ╔════════════════════════════════╗
     ║ Data and Time - UTC. Creation. ║
     ╚════════════════════════════════╝ -->
  <meta name="creation_date"                           content="2013-11-26T12:01:05+00:00"     />
  <meta name="page-datetime"                           content="2013-11-26T12:01:05+00:00"     />
  <meta property="article:published_time"              content="2013-11-26T12:01:05+00:00"     />
  <meta name="dcterms.date"                            content="2013-11-26T12:01:05+00:00"     />
<!-- ╔═════════════════════════════════════╗
     ║ Data and Time - UTC. Last-Modified. ║
     ╚═════════════════════════════════════╝ -->
  <meta name="dcterms.modified"                        content="2016-08-02T03:08:59+00:00"    />
  <meta property="article:modified_time"               content="2016-08-02T03:08:59+00:00"    />
<!-- ╔═════════════════════════════════════════╗
     ║ License - FREE FOR ALL - PUBLIC-DOMAIN! ║
     ╚═════════════════════════════════════════╝ -->
  <link rel="license"                                     href="https://icompile.eladkarako.com/LICENSE" />
<!-- ╔════════════════════╗
     ║ preconnect (self)  ║
     ╚════════════════════╝ -->
  <link rel="dns-prefetch"   crossorigin="anonymous"                                                                                     href="https://icompile.eladkarako.com"                             />
  <link rel="preconnect"     crossorigin="anonymous"                                                                                     href="https://icompile.eladkarako.com"                             />
<!-- ╔═══════════════════════╗
     ║ preconnect (external) ║
     ╚═══════════════════════╝ -->
  <link rel="dns-prefetch"   crossorigin="anonymous"                                                                                     href="https://utteranc.es"                                         />
  <link rel="preconnect"     crossorigin="anonymous"                                                                                     href="https://utteranc.es"                                         />
  <link rel="dns-prefetch"   crossorigin="anonymous"                                                                                     href="www.googletagmanager.com"                                    />
  <link rel="preconnect"     crossorigin="anonymous"                                                                                     href="www.googletagmanager.com"                                    />
  <!-- not being used right now... 
  <link rel="dns-prefetch"   crossorigin="anonymous"                                                                                     href="www.google-analytics.com"                                    />
  <link rel="preconnect"     crossorigin="anonymous"                                                                                     href="www.google-analytics.com"                                    />
  <link rel="dns-prefetch"   crossorigin="anonymous"                                                                                     href="ssl.google-analytics.com"                                    />
  <link rel="preconnect"     crossorigin="anonymous"                                                                                     href="ssl.google-analytics.com"                                    />
  -->
<!-- ╔═════════════════╗
     ║ preload (self)  ║
     ╚═════════════════╝ -->
  <link rel="preload"        crossorigin="anonymous"        type="image/x-icon"                           as="image"                     href="https://icompile.eladkarako.com/favicon.ico"                 />
  <link rel="preload"        crossorigin="anonymous"        type="text/css"               charset="UTF-8" as="style"                     href="https://icompile.eladkarako.com/_resources/index.css"        />
  <link rel="preload"        crossorigin="anonymous"        type="text/javascript"        charset="UTF-8" as="script"                    href="https://icompile.eladkarako.com/_resources/index.js"         />
<!-- ╔════════════════════╗
     ║ preload (external) ║
     ╚════════════════════╝ -->
  <link rel="preload"        crossorigin="anonymous"  type="text/javascript"        charset="UTF-8" as="script"                          href="https://utteranc.es/client.js"                               />
  <link rel="preload"        crossorigin="anonymous"  type="text/javascript"        charset="UTF-8" as="script"                          href="https://www.googletagmanager.com/gtag/js?id=G-M28VNCZS3P"    />
<!-- ╔══════╗
     ║ load ║
     ╚══════╝ -->
  <link rel="icon"           crossorigin="anonymous"        type="image/x-icon"                                                                href="https://icompile.eladkarako.com/favicon.ico" />
  <link rel="shortcut icon"  crossorigin="anonymous"        type="image/x-icon"                                                                href="https://icompile.eladkarako.com/favicon.ico" />
<!-- ╔════════════════════════════════════════════════╗
     ║ page specific image (but favicon is fine too). ║
     ╚════════════════════════════════════════════════╝ -->
  <meta itemprop="image"                                    type="image/png"                                                                content="https://icompile.eladkarako.com/favicon.png" />
  <meta property="og:image"                                 type="image/png"                                                                content="https://icompile.eladkarako.com/favicon.png" />
  <link rel="apple-touch-icon image_src"                    type="image/png"                                                                   href="https://icompile.eladkarako.com/favicon.png" />
  <link rel="stylesheet"     crossorigin="anonymous"        type="text/css"               charset="UTF-8" media="all"                          href="https://icompile.eladkarako.com/_resources/index.css"   />
<!-- ╔══════════════════════════════════════════════════════╗
     ║ OpenSearch (as en external file). type is important. ║
     ╚══════════════════════════════════════════════════════╝ -->
  <link rel="search"                                   href="https://icompile.eladkarako.com/opensearch.xml" type="application/opensearchdescription+xml" title="Search icompile.eladkarako.com" charset="UTF-8" />
<!-- ╔═══════════════════════════════════════╗
     ║ micro-data in a schema-friendly JSON. ║
     ╚═══════════════════════════════════════╝ -->
  <script type="application/ld+json">
{"@context"        : "http://schema.org/"
,"@type"           : "WebSite"
,"name"            : "iCompile"
,"alternateName"   : "iCompile"
,"@id"             : "https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"
,"url"             : "https://icompile.eladkarako.com/fast-download-and-parse-http-archive-requests-file"
,"headline"        : "Fast download and parse http-archive requests file"
,"description"     : "Fast download and parse http-archive requests file"
,"datePosted"      : "2013-11-26T12:01:05+00:00"
,"dateCreated"     : "2013-11-26T12:01:05+00:00"
,"datePublished"   : "2013-11-26T12:01:05+00:00"
,"dateModified"    : "2016-08-02T03:08:59+00:00"
,"thumbnailUrl"    : "https://icompile.eladkarako.com/favicon.png"
,"image"           : {"@type"       : "ImageObject"
                     ,"url"         : "https://icompile.eladkarako.com/favicon.png"
                     ,"width"       : 152
                     ,"height"      : 152
                     }
,"potentialAction" : {"@type"       : "SearchAction"
                     ,"target"      : "https://www.google.com/search/?q={query}%20site%3Ahttps%3A%2F%2Ficompile.eladkarako.com%2F"
                     ,"query"       : "required"
                     }
,"author"          : {"@type"       : "Person"
                     ,"name"        : "Elad Karako"
                     ,"givenName"   : "Elad"
                     ,"familyName"  : "Karako"
                     ,"jobTitle"    : "Software Engineer"
                     }
,"license"         : "https://icompile.eladkarako.com/LICENSE"
}
  </script>
<!-- ╔════════════════════╗
     ║ Analytics (no JS). ║
     ╚════════════════════╝ -->
  <noscript><iframe          crossorigin="anonymous"  type="text/html"              charset="UTF-8" loading="eager" lazyload="off"        src="https://www.googletagmanager.com/ns.html?id=G-M28VNCZS3P" referrerpolicy="unsafe-url" sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation" seamless="false" height="0" width="0" style="display:none;"></iframe></noscript>
</head>
<body role="main">

<article id="post-0005627645831">
  <header>
    <h1 itemprop="headline">Fast download and parse http-archive requests file</h1>
    <sup>Posted at <time datetime="2016-08-02T03:08:59+00:00" itemprop="dateModified">Tue, 02 Aug 2016 03:08:59 GMT</time></sup>
  </header>
  <br/>
  <div itemprop="articleBody">download a full-length file from archive.org, trimming it (with any method you'll like to) to about 300kb gzip file, which are about 2.5mb txt file which are about 2570 requests (line separated), you can open it with a notepad2/editplus/notepad++ editor that can handle those sort-of-file-sizes,<br/>
and remove the last line, which is usually partial due to the trimming (..the step before).<br/>
<br/>
parsing is quite easy, perl/python and even bash has a sample on extracting tsv/csv data,<br/>
you can download here an easy to use (fully working) example (that would probably will also work for the untrimmed file): <a href="https://github.com/eladkarako/icompile/releases/download/latest/http_archive_parse.rar">https://github.com/eladkarako/icompile/releases/download/latest/http_archive_parse.rar</a><br/>
<br/>
<a href="https://icompile.eladkarako.com/_uploads/2013/11/2013-11-26_135041.jpg"><img loading="lazy" lazyload="on"  class="alignnone size-full wp-image-848" alt="2013-11-26_135041" src="https://icompile.eladkarako.com/_uploads/2013/11/2013-11-26_135041.jpg" width="189" height="182" /></a> <br/>
<br/>
<a href="https://icompile.eladkarako.com/_uploads/2013/11/2013-11-26_135023.jpg"><img loading="lazy" lazyload="on"  class="alignnone size-full wp-image-849" alt="2013-11-26_135023" src="https://icompile.eladkarako.com/_uploads/2013/11/2013-11-26_135023.jpg" width="220" height="97" /></a> <br/>
<br/>
this includes automated download, and parsing. use the cmd file for windows (you should modify it a bit to be used in linux, but it can be done easily). the sh file is a "line-parser" by field to the CSV. note #1: the last line in requests.txt is removed since it will be corrupted (the gzip file, line based compressed, so we just removing the last line to make it valid even though the file is trunked) <br/>
<br/>
note #2: see http://httparchive.org/downloads.php for more details.<br/>
<br/>
note #3: the CSV does not includes header, so I've added it taking it from the MYSQL scheme available here:<br/>
http://httparchive.org/downloads/httparchive_schema.sql<br/>
(db-table name: "requests")<br/>
<br/>
----<br/>
<br/>
how to download<br/>
<pre>
::@echo off

set sURL=http://www.archive.org/download/httparchive_downloads_Nov_15_2013/httparchive_Nov_15_2013_requests.csv.gz

::----------------------------------------------------------------------------------------------
set exePath=.\
esource
set csvHeader=requestid,pageid,startedDateTime,time,method,url,urlShort,redirectUrl,firstReq,firstHtml,reqHttpVersion,reqHeadersSize,reqBodySize,reqCookieLen,reqOtherHeaders,status,respHttpVersion,respHeadersSize,respBodySize,respSize,respCookieLen,expAge,mimeType,respOtherHeaders,req_accept,req_accept_charset,req_accept_encoding,req_accept_language,req_connection,req_host,req_if_modified_since,req_if_none_match,req_referer,req_user_agent,resp_accept_ranges,resp_age,resp_cache_control,resp_connection,resp_content_encoding,resp_content_language,resp_content_length,resp_content_location,resp_content_type,resp_date,resp_etag,resp_expires,resp_keep_alive,resp_last_modified,resp_location,resp_pragma,resp_server,resp_transfer_encoding,resp_vary,resp_via,resp_x_powered_by
::----------------------------------------------------------------------------------------------

::cleanup
del /f /q requests.gz
del /f /q requests.txt
del /f /q requests_fixed.txt


::download 300kb ~~ 2.5mb txt file ~~ 2570 requests (line separated)
%exePath%\\curl.exe --location-trusted --output requests.gz --range 0-307200 "%sURL%"

::un-gz
%exePath%\\7z.exe x requests.gz >nul

::cleanup
del /f /q requests.gz

::fix - remove last line since it will be corrupted 
%exePath%\\head.exe -n -1 requests.txt > requests_fixed.txt

::cleanup
del /f /q requests.txt

echo %csvHeader% >requests.txt
%exePath%\\cat.exe requests_fixed.txt >>requests.txt

::cleanup
del /f /q requests_fixed.txt
</pre><br/>
<br/>
<br/>
how to parse<br/>
<pre><br/>
#!/bin/bash<br/>
INPUT=requests.txt<br/>
OLDIFS=$IFS<br/>
IFS=,<br/>
[ ! -f $INPUT ] && { echo "$INPUT file not found"; exit 99; }<br/>
while read method url redirectUrl<br/>
do<br/>
        echo "method : $method"<br/>
        echo "url : $url"<br/>
        echo "redirectUrl : $redirectUrl"<br/>
done < $INPUT<br/>
IFS=$OLDIFS<br/>
</pre><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
y2013m12d10 update:<br/>
download schema from http://httparchive.org/downloads/httparchive_schema.sql<br/>
extract requests table creation script:<br/>
<br/>
<pre>
CREATE TABLE 'requests' (
  'requestid' INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  'pageid' INT(10) UNSIGNED NOT NULL,
  'startedDateTime' INT(10) UNSIGNED DEFAULT NULL,
  'time' INT(10) UNSIGNED DEFAULT NULL,
  'method' VARCHAR(32) DEFAULT NULL,
  'url' TEXT,
  'urlShort' VARCHAR(255) DEFAULT NULL,
  'redirectUrl' TEXT,
  'firstReq' TINYINT(1) NOT NULL,
  'firstHtml' TINYINT(1) NOT NULL,
  'reqHttpVersion' VARCHAR(32) DEFAULT NULL,
  'reqHeadersSize' INT(10) UNSIGNED DEFAULT NULL,
  'reqBodySize' INT(10) UNSIGNED DEFAULT NULL,
  'reqCookieLen' INT(10) UNSIGNED NOT NULL,
  'reqOtherHeaders' TEXT,
  'status' INT(10) UNSIGNED DEFAULT NULL,
  'respHttpVersion' VARCHAR(32) DEFAULT NULL,
  'respHeadersSize' INT(10) UNSIGNED DEFAULT NULL,
  'respBodySize' INT(10) UNSIGNED DEFAULT NULL,
  'respSize' INT(10) UNSIGNED DEFAULT NULL,
  'respCookieLen' INT(10) UNSIGNED NOT NULL,
  'expAge' INT(10) UNSIGNED NOT NULL,
  'mimeType' VARCHAR(255) DEFAULT NULL,
  'respOtherHeaders' TEXT,
  'req_accept' VARCHAR(255) DEFAULT NULL,
  'req_accept_charset' VARCHAR(255) DEFAULT NULL,
  'req_accept_encoding' VARCHAR(255) DEFAULT NULL,
  'req_accept_language' VARCHAR(255) DEFAULT NULL,
  'req_connection' VARCHAR(255) DEFAULT NULL,
  'req_host' VARCHAR(255) DEFAULT NULL,
  'req_if_modified_since' VARCHAR(255) DEFAULT NULL,
  'req_if_none_match' VARCHAR(255) DEFAULT NULL,
  'req_referer' VARCHAR(255) DEFAULT NULL,
  'req_user_agent' VARCHAR(255) DEFAULT NULL,
  'resp_accept_ranges' VARCHAR(255) DEFAULT NULL,
  'resp_age' VARCHAR(255) DEFAULT NULL,
  'resp_cache_control' VARCHAR(255) DEFAULT NULL,
  'resp_connection' VARCHAR(255) DEFAULT NULL,
  'resp_content_encoding' VARCHAR(255) DEFAULT NULL,
  'resp_content_language' VARCHAR(255) DEFAULT NULL,
  'resp_content_length' VARCHAR(255) DEFAULT NULL,
  'resp_content_location' VARCHAR(255) DEFAULT NULL,
  'resp_content_type' VARCHAR(255) DEFAULT NULL,
  'resp_date' VARCHAR(255) DEFAULT NULL,
  'resp_etag' VARCHAR(255) DEFAULT NULL,
  'resp_expires' VARCHAR(255) DEFAULT NULL,
  'resp_keep_alive' VARCHAR(255) DEFAULT NULL,
  'resp_last_modified' VARCHAR(255) DEFAULT NULL,
  'resp_location' VARCHAR(255) DEFAULT NULL,
  'resp_pragma' VARCHAR(255) DEFAULT NULL,
  'resp_server' VARCHAR(255) DEFAULT NULL,
  'resp_transfer_encoding' VARCHAR(255) DEFAULT NULL,
  'resp_vary' VARCHAR(255) DEFAULT NULL,
  'resp_via' VARCHAR(255) DEFAULT NULL,
  'resp_x_powered_by' VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY ('requestid'),
  UNIQUE KEY 'startedDateTime' ('startedDateTime','pageid','urlShort'),
  KEY 'pageid' ('pageid')
) ENGINE=MYISAM AUTO_INCREMENT=1070623634 DEFAULT CHARSET=latin1;
</pre><br/>
<br/>
run query to create table and then export it to CSV (table is empty..) to get all the headers in easy copy&&paste format.<br/>
<pre>
requestid,pageid,startedDateTime,time,method,url,urlShort,redirectUrl,firstReq,firstHtml,reqHttpVersion,reqHeadersSize,reqBodySize,reqCookieLen,reqOtherHeaders,status,respHttpVersion,respHeadersSize,respBodySize,respSize,respCookieLen,expAge,mimeType,respOtherHeaders,req_accept,req_accept_charset,req_accept_encoding,req_accept_language,req_connection,req_host,req_if_modified_since,req_if_none_match,req_referer,req_user_agent,resp_accept_ranges,resp_age,resp_cache_control,resp_connection,resp_content_encoding,resp_content_language,resp_content_length,resp_content_location,resp_content_type,resp_date,resp_etag,resp_expires,resp_keep_alive,resp_last_modified,resp_location,resp_pragma,resp_server,resp_transfer_encoding,resp_vary,resp_via,resp_x_powered_by
</pre><br/>
<br/>
download to desktop and extract the entire archive of requests for December<br/>
http://www.archive.org/download/httparchive_downloads_Dec_1_2013/httparchive_Dec_1_2013_requests.csv.gz<br/>
rename requests.txt to httparchive_Dec_1_2013_requests.csv<br/>
<br/>
(download of 2.23GB, at rate of about 1.5MB, will take about 33 minutes).<br/>
<br/>
use cygwin (or win32 compiled fgrep, by cygwin is better here..)<br/>
and run the following command to extract only the lines (this file is line based) of the hosts we are interested in:<br/>
**note the "DESKTOP" location<br/>
<pre>
LC_ALL=C fgrep 'tuoitre.vn' "c:/users/karako/Desktop/httparchive_Dec_1_2013_requests.csv" >c:/users/karako/Desktop/httparchive_Dec_1_2013_requests__tuoitrevn.csv
</pre><br/>
<br/>
now you'll have smaller CSV, note that the original csv file nor this will not have headers in it.<br/>
you might want to copy and paste it to the first line (for any reason)..<br/>
<br/>
this is the result CSV contains only the host 'tuoitre.vn', with headers..<br/>
<a href="https://github.com/eladkarako/icompile/releases/download/latest/httparchive_Dec_1_2013_requests__tuoitrevn.csv.7z">https://github.com/eladkarako/icompile/releases/download/latest/httparchive_Dec_1_2013_requests__tuoitrevn.csv.7z</a><br/>
<br/>
<br/>
<br/>
<br/>
now you can run the shell script to map it to a cURL request, <br/>
(assumes the CSV file is on your desktop)<br/>
<br/>
(parse.sh content:)<br/>
<pre><br/>
#!/bin/bash<br/>
INPUT=c:/users/karako/Desktop/httparchive_Dec_1_2013_requests.csv<br/>
OLDIFS=$IFS<br/>
IFS=,<br/>
[ ! -f $INPUT ] && { echo "$INPUT file not found"; exit 99; }<br/>
while read method url redirectUrl<br/>
do<br/>
    echo "method : $method"<br/>
    echo "url : $url"<br/>
    echo "redirectUrl : $redirectUrl"<br/>
    echo "reqOtherHeaders : $reqOtherHeaders"<br/>
    echo "req_user_agent : $req_user_agent"<br/>
    echo "---------------------------------------------------"<br/>
done < $INPUT<br/>
IFS=$OLDIFS<br/>
</pre><br/>
<br/>
<br/>
*don't forget..<br/>
<pre>
chmod u+x parse.sh
./parse.sh
</pre><br/>
<br/>
<br/>
*** update <br/>
output example:<br/>
<pre>
---------------------------------------------------
method : "1045176502"
url : "12623315"
redirectUrl : "1385861436","191","GET","https://yolacom.yolacdn.net/assets/img/slider/07_blueprintforjonas_tn.jpg","https://yolacom.yolacdn.net/assets/img/slider/07_blueprintforjonas_tn.jpg",N,"0","0","1.1",N,N,"0","X-Download-Initiator = image="doc F300 win 1458; image; src; enter tree"","200","1.1",N,"23961","23961","0","1","image/jpeg","Yola-ID = web1 D=199 t=1385159099295583","image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5",N,"gzip, deflate","en-US","Keep-Alive","yolacom.yolacdn.net",N,N,"https://www.yola.com/","Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0; PTST 2.361)","bytes",N,"max-age=1","keep-alive",N,N,"23961",N,"image/jpeg","Sun, 01 Dec 2013 09:30:37 GMT",""6a7d71-5d99-4ebc7b1028f80"","Sun, 01 Dec 2013 09:30:38 GMT",N,"Fri, 22 Nov 2013 17:53:27 GMT",N,N,"Apache",N,N,N,N
reqOtherHeaders :
req_user_agent :
---------------------------------------------------
method : "1045176504"
url : "12623315"
redirectUrl : "1385861436","338","GET","https://yolacom.yolacdn.net/assets/img/slider/08_bodybar_tn.jpg","https://yolacom.yolacdn.net/assets/img/slider/08_bodybar_tn.jpg",N,"0","0","1.1",N,N,"0","X-Download-Initiator = image="doc F300 win 1458; image; src; enter tree"","200","1.1",N,"22489","22489","0","1","image/jpeg","Yola-ID = web2 D=271 t=1385685922213243","image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5",N,"gzip, deflate","en-US","Keep-Alive","yolacom.yolacdn.net",N,N,"https://www.yola.com/","Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0; PTST 2.361)","bytes",N,"max-age=1","keep-alive",N,N,"22489",N,"image/jpeg","Sun, 01 Dec 2013 09:30:37 GMT",""ae7ce9-57d9-4ec37cb0da71e"","Sun, 01 Dec 2013 09:30:38 GMT",N,"Thu, 28 Nov 2013 07:38:00 GMT",N,N,"Apache",N,N,N,N
reqOtherHeaders :
req_user_agent :
---------------------------------------------------
method : "1045176506"
url : "12623315"
redirectUrl : "1385861436","336","GET","https://yolacom.yolacdn.net/assets/img/slider/09_channysphotography_tn.jpg","https://yolacom.yolacdn.net/assets/img/slider/09_channysphotography_tn.jpg",N,"0","0","1.1",N,N,"0","X-Download-Initiator = image="doc F300 win 1458; image; src; enter tree"","200","1.1",N,"30751","30751","0","1","image/jpeg","Yola-ID = web1 D=297 t=1384009469773430","image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5",N,"gzip, deflate","en-US","Keep-Alive","yolacom.yolacdn.net",N,N,"https://www.yola.com/","Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0; PTST 2.361)","bytes",N,"max-age=1","keep-alive",N,N,"30751",N,"image/jpeg","Sun, 01 Dec 2013 09:30:37 GMT",""54ef65-781f-4eab2bf29513e"","Sun, 01 Dec 2013 09:30:38 GMT",N,"Fri, 08 Nov 2013 23:28:59 GMT",N,N,"Apache",N,N,N,N
reqOtherHeaders :
req_user_agent :
---------------------------------------------------
</pre><br/>
<br/>
<strong>as you can see it seems to be a little shift (>>>>?) from the schema, to the actual CSV export data, <br/>
but thats not too bad, feel free to comment on the change needed..<br/>
</strong><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
y2013m12d11 update:<br/>
--------------------<br/>
<br/>
place all of the gzip files in a folder ("res")<br/>
<pre>
cd ./res/
zcat *.gz | LC_ALL=C fgrep --fixed-strings 'tuoitre.vn' >requests_with_tuoitrevn.csv
</pre><br/>
<br/>
this one gave me an idea!<br/>
http://drjohnstechtalk.com/blog/2011/06/gnu-parallel-really-helps-with-zcat/<br/>
<br/>
<pre>
cd ./res/
ls *gz | parallel -k "zcat {} | LC_ALL=C fgrep --fixed-strings 'tuoitre.vn'" >requests_with_tuoitrevn.csv
</pre><br/>
<br/>
<br/>
<br/>
time it!!<br/>
see how much cpu is used<br/>
on a dummy (for testing) content<br/>
zcat *.gz | <strong>time</strong> LC_ALL=C fgrep --fixed-strings 'tuoitre.vn' >requests_with_tuoitrevn.csv<br/>
--->0.00user 0.00system 0:00.01elapsed 0%CPU (0avgtext+0avgdata 194560maxresident)k 0inputs+0outputs (782major+0minor)pagefaults 0swaps<br/>
<br/>
ls *gz | <strong>time</strong> parallel -k "zcat {} | LC_ALL=C fgrep --fixed-strings 'tuoitre.vn'" >requests_with_tuoitrevn.csv<br/>
----> 0.20user 0.13system 0:00.41elapsed 80%CPU (0avgtext+0avgdata 7208960maxresident)k 0inputs+0outputs (28944major+0minor)pagefaults 0swaps<br/>
<br/>
<br/>
<br/>
hmmm... maybe just using months first (multi cygwin shell for each month):<br/>
zcat httparchive_Dec_1_2013_requests.csv.gz | grep '.tase.co.il' >2013_Dec__requests_with_tasecoil.csv<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<strong>update y2013m12d11:</strong><br/>
<br/>
----------------------------------------------------------------------------------------------------------------------------------<br/>
0.1 download csv.gz archive for example:<br/>
http://ia601504.us.archive.org/14/items/httparchive_downloads/httparchive_Apr_1_2013_requests.csv.gz<br/>
<br/>
0.2 rename it from:<br/>
<pre>
httparchive_Apr_1_2013_requests.csv.gz
</pre><br/>
to:<br/>
<pre>
y2013_m04_d01.csv.gz
</pre><br/>
<br/>
0.3 do it for as much archives as possible.<br/>
<br/>
0.4 create c:/work/trunk/massRequest<br/>
0.5 create c:/work/trunk/massRequest/res<br/>
0.6 create c:/work/trunk/massRequest/1<br/>
<br/>
0.7 place all csv.gz files in c:/work/trunk/massRequest/1<br/>
<br/>
--------------------------<br/>
<br/>
1. place just 1 file in the c:/work/trunk/massRequest/res<br/>
for example:<br/>
<pre>
y2012_m12_d01.csv.gz
</pre><br/>
<br/>
2. open five cygwin shell window since we are going to run multi process for each host.<br/>
the hosts we are looking for:<br/>
<pre>
vmware.com
cars.com
.rbs.com
tuoitre.vn
tase.co.il
</pre><br/>
<br/>
3. on each cygwin window run:<br/>
<pre>
cd c:/work/trunk/massRequest/res
</pre><br/>
<br/>
4. one one command on each window:<br/>
<pre>
ls *gz | time parallel -k "zcat {} | LC_ALL=C fgrep 'vmware.com'" >requests_with_vmwarecom.csv
ls *gz | time parallel -k "zcat {} | LC_ALL=C fgrep 'cars.com'" >requests_with_carscom.csv
ls *gz | time parallel -k "zcat {} | LC_ALL=C fgrep '.rbs.com'" >requests_with_rbscom.csv
ls *gz | time parallel -k "zcat {} | LC_ALL=C fgrep 'tuoitre.vn'" >requests_with_tuoitrevn.csv
ls *gz | time parallel -k "zcat {} | LC_ALL=C fgrep 'tase.co.il'" >requests_with_tasecoil.csv
</pre><br/>
<br/>
5. when done, add prefix to each result csv file:<br/>
for example:<br/>
    you run this command:<br/>
<pre>
        ls *gz | time parallel -k "zcat {} | LC_ALL=C fgrep 'vmware.com'" >requests_with_vmwarecom.csv
</pre><br/>
<br/>
    the file in the folder was:<br/>
        y2013_m01_d01.csv.gz<br/>
<br/>
    ---> rename <br/>
<pre>
            requests_with_vmwarecom.csv
</pre><br/>
         to<br/>
<pre>
            y2013_m01_d01__requests_with_vmwarecom.csv
</pre><br/>
<br/>
<br/>
6. move all files to ./done/ folder, marking all this month done.<br/>
<pre>
y2013_m01_d01.csv.gz
y2013_m01_d01__requests_with_carscom.csv
y2013_m01_d01__requests_with_rbscom.csv
y2013_m01_d01__requests_with_tasecoil.csv
y2013_m01_d01__requests_with_tuoitrevn.csv
y2013_m01_d01__requests_with_vmwarecom.csv
</pre><br/>
<br/>
7. move a new gz file from folder ./1/ into the res folder.<br/>
8. on each cygwin window, press {UP} key and enter to run the command again,<br/>
9. keep downloading new csv.gz files on 1st and 15th on each month.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<pre>
-------------------------------------------------------------------------------------------
since this process is massive on the CPU
and the download of all the archives takes a long time,
we only filter out lines that does not have our host name in it,

a secondary filter (on the smaller output files) is needed,
there we should check that the *request* (url of the site)- is the one in that line.
-------------------------------------------------------------------------------------------
</pre><br/>
<br/>
-----------------------------------------------------------------------------------------------------------------------------</div>
  <br/>
  <br/>
  <br/>
  <footer>
    <center><a rel="first" title="First Article" itemprop="relatedLink" href="https://icompile.eladkarako.com/show-hidden-devices-in-windows-device-manager">&vert;&lt;</a>&nbsp;<a rel="previous" title="Previous Article" itemprop="relatedLink" href="https://icompile.eladkarako.com/free-social-networking-icon-set">&lt;</a>&nbsp;<a rel="index" title="Home-Page" itemprop="relatedLink" href="https://icompile.eladkarako.com/">&Hat;</a>&nbsp;<a rel="next" title="Next Article" itemprop="relatedLink" href="https://icompile.eladkarako.com/13-31-113-131-311-prime-numbers">&gt;</a>&nbsp;<a rel="last" title="Last Article" itemprop="relatedLink" href="https://icompile.eladkarako.com/shealth">&gt;&vert;</a></center>
    <br/>
    <table>
      <thead>
        <tr><td colspan="2">Next Articles</td></tr>
      </thead>
      <tbody>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/13-31-113-131-311-prime-numbers">311 Prime Numbers</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/vb6-api-for-coinitializeex-and-couninitialize-of-ole32-dll">VB6 API For CoInitializeEx and CoUninitialize of ole32.dll</a></td></tr>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/window-messeging-example">JavaScript Snippet - WordPress Window-Messaging Semi-Safe Example</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/javascript-snippet-robtex-com-sorted-lists">JavaScript Snippet - Robtex.com Sorted Lists</a></td></tr>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/new-wordpress-plugin-tagclass-bgone">New WordPress Plugin - TagClass-B-Gone</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/wordpress-script-style-killer">New WordPress Plugin - Script-Style-Killer</a></td></tr>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/web-whatsapp-com-resources-inline-style-zero-and-custom">web.whatsapp.com Resources - Inline-Style - Zero And Custom</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/whatsapp-new-emoji-from-web-whatsapp-com">Whatsapp New Emoji - From web.whatsapp.com</a></td></tr>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/whatsapp-new-emoji-from-android-apk">Whatsapp New Emoji – From Android-APK</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/firefox-disgrace">Firefox Is A F***ing Disgrace</a></td></tr>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/javascript-specific-base64-snippet">JavaScript Snippet - Specific Base64 Bookmarklet</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/apache-htaccess-entry-for-serving-correct-mimetype-for-some-of-the-more-common-file-types">Apache .htaccess Entry For Serving Correct MimeType For Some Of The More Common File-Types</a></td></tr>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/html5-checkbox">HTML5 Ninja - Custom CheckBox</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/rain-in-israel-%e2%98%94-in-the-middle-of-august%e2%98%80-wtf">Rain In Israel! ☔ In The Middle Of August?☀ WTF???</a></td></tr>
        <tr><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/notepad2-encoding-and-eol-defaults">Notepad2 Encoding And EOL Defaults</a></td><td><a itemprop="relatedLink" href="https://icompile.eladkarako.com/microsoft-urls-used-by-background-services-you-can-not-block-with-hosts-file">Microsoft URLS Used By Background Services You Can-Not Block With HOSTS-File</a></td></tr>
      </tbody>
    </table>
  </footer>
</article>
<br/>
<hr/>
<br/>


<br/>
<script defer="defer"        crossorigin="anonymous"  type="text/javascript"        charset="UTF-8" loading="eager" lazyload="off"        src="https://icompile.eladkarako.com/_resources/index.js"></script>
</body>
</html>