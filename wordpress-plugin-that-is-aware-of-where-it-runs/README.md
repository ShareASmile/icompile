You want to know as early as possible if you are 'running from within' Atom, feed, sitemap.xml, etc..

It is not always easy to tell where exactly 'are you' when executing from within a WordPress-plugin,
since a lot of what seems to be a static resource at first, such as the following url: <a href="https://icompile.eladkarako.com/sitemap.xml" target="_blank">https://icompile.eladkarako.com/sitemap.xml</a> is really <strong>too</strong> rendered by using the WordPress' template-engine, 

If a resource is using the WordPress template-engine, it uses <code>index.php</code> as its entry point to the WordPress system,
from there, which is actually the same point-of entrance as, for example one of your articles.

Identifying "what is it am I watching right now" is quite important especially if your WordPress-plugin is doing a content-specific action, for example editing an HTML content of the page, it is most certainly not fitted for an XML-content, for example, if you are currently visiting <code>sitemap.xml</code>. It might even break it!

Few of my plugins, do, in-fact modify a raw-HTML content,
and for that they are being loaded as the LAST plugin in the page's rendering-life-cycle.

WordPress-platform does include <code>is_home</code>, <code>is_front_page</code> and similar "is..?" functions, but they are too poor quality, and often requires being "in-the-loop" or querying the database, or generally-speaking "being too late" in the page-rendering life cycle.

There are simple, efficient (and somewhat heuristic) ways of knowing if your WordPress plugin should be "working on that content" or just skip, leaving the content unmodified.

As a rule-of-thumb you do not want to work on static-like contents (JSON, XML), neither working on admin-pages or anything that has not passed-through the WordPress template-engine (the request started, by the <code>index.php</code> entry-point).

Here is a partial segment of the code I am using on <a href="https://github.com/eladkarako/wordpress-plugin-raw-html-manipulation-minifier/" target="_blank">one of my WordPress plugins that minifies the entire HTML code</a>:

<!--more-->
<hr/>

<pre>
<span style='color:#5f5035;'>&lt;&quest;php</span>
<span style='color:#000000;'>&#xa0;&#xa0;</span><span style='color:#696969;'>/* ---------------------------------------------------------------------------------------------- */</span>
<span style='color:#000000;'>&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;engine&lowbar;ok</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#400000;'>call&lowbar;user&lowbar;func</span><span style='color:#808030;'>(</span><span style='color:#800000;font-weight:bold; '>function</span><span style='color:#808030;'>(</span><span style='color:#808030;'>)</span><span style='color:#800080;'>{</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>function</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#797997;'>&dollar;attribute</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;regex</span><span style='color:#808030;'>)</span><span style='color:#800080;'>{</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>return</span><span style='color:#000000;'> </span><span style='color:#808030;'>(</span><span style='color:#008c00;'>1</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#400000;'>preg&lowbar;match</span><span style='color:#808030;'>(</span><span style='color:#797997;'>&dollar;regex</span><span style='color:#808030;'>,</span><span style='color:#000000;'> filter&lowbar;input</span><span style='color:#808030;'>(</span><span style='color:#000000;'>INPUT&lowbar;SERVER</span><span style='color:#808030;'>,</span><span style='color:#797997;'>&dollar;attribute</span><span style='color:#808030;'>)</span><span style='color:#808030;'>)</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800080;'>}</span>

<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;php</span><span style='color:#000000;'>     </span><span style='color:#808030;'>=</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'PHP&lowbar;SELF'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>   </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0000e6;'>index</span><span style='color:#0f69ff;'>\\.</span><span style='color:#0000e6;'>php</span><span style='color:#808030;'>&dollar;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>   </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'>  </span><span style='color:#696969;'>/* WordPress-Template-engine */</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;admin</span><span style='color:#000000;'>   </span><span style='color:#808030;'>=</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#0000e6;'>wp</span><span style='color:#0f69ff;'>\\-</span><span style='color:#0000e6;'>admin</span><span style='color:#0f69ff;'>\\/</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'> </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'>  </span><span style='color:#696969;'>/* admin folder */</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;feed</span><span style='color:#000000;'>    </span><span style='color:#808030;'>=</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#0000e6;'>feed</span><span style='color:#0f69ff;'>\\/</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>|</span><span style='color:#808030;'>|</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#0000e6;'>feed</span><span style='color:#0f69ff;'>\\/</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;atom</span><span style='color:#000000;'>    </span><span style='color:#808030;'>=</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#0000e6;'>atom</span><span style='color:#0f69ff;'>\\/</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>|</span><span style='color:#808030;'>|</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#0000e6;'>atom</span><span style='color:#0f69ff;'>\\/</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;json</span><span style='color:#000000;'>    </span><span style='color:#808030;'>=</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#0000e6;'>wp</span><span style='color:#0f69ff;'>\\-</span><span style='color:#0000e6;'>json</span><span style='color:#0f69ff;'>\\/</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>  </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>|</span><span style='color:#808030;'>|</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#0000e6;'>wp</span><span style='color:#0f69ff;'>\\-</span><span style='color:#0000e6;'>json</span><span style='color:#0f69ff;'>\\/</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>  </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;sitemap</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0000e6;'>sitemap</span><span style='color:#0f69ff;'>\\.</span><span style='color:#0000e6;'>xml</span><span style='color:#808030;'>&dollar;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'> </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>|</span><span style='color:#808030;'>|</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0000e6;'>sitemap</span><span style='color:#0f69ff;'>\\.</span><span style='color:#0000e6;'>xml</span><span style='color:#808030;'>&dollar;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'> </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>&dollar;is&lowbar;article</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>\\/</span><span style='color:#808030;'>&dollar;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>           </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'>  </span><span style='color:#696969;'>/* RISKY! permalink format specific. */</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>return</span><span style='color:#000000;'> </span><span style='color:#808030;'>(</span><span style='color:#000000;'>  </span><span style='color:#0f4d75;'>true</span><span style='color:#000000;'>  </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;php</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;admin</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;feed</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;atom</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;json</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;sitemap</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>true</span><span style='color:#000000;'>  </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;article</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800080;'>}</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>if</span><span style='color:#808030;'>(</span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>&dollar;is&lowbar;engine&lowbar;ok</span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>return</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;</span><span style='color:#696969;'>/* ---------------------------------------------------------------------------------------------- */</span>
<span style='color:#5f5035;'>&quest;&gt;</span>
</pre>

edit:  this improvement will also keep the environment untainted, cleaning-up the function name after it is no-longer needed..

<pre>
<span style='color:#5f5035;'>&lt;&quest;php</span>
<span style='color:#696969;'>&sol;&ast; ---------------------------------------------------------------------------------------------- &ast;&sol;</span>
<span style='color:#000000;'>&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;engine&lowbar;ok</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#400000;'>call&lowbar;user&lowbar;func</span><span style='color:#808030;'>(</span><span style='color:#800000;font-weight:bold; '>function</span><span style='color:#808030;'>(</span><span style='color:#808030;'>)</span><span style='color:#800080;'>{</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>function</span><span style='color:#808030;'>(</span><span style='color:#797997;'>$attribute</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#797997;'>$regex</span><span style='color:#808030;'>)</span><span style='color:#800080;'>{</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>return</span><span style='color:#000000;'> </span><span style='color:#808030;'>(</span><span style='color:#008c00;'>1</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#400000;'>preg&lowbar;match</span><span style='color:#808030;'>(</span><span style='color:#797997;'>$regex</span><span style='color:#808030;'>,</span><span style='color:#000000;'> filter&lowbar;input</span><span style='color:#808030;'>(</span><span style='color:#000000;'>INPUT&lowbar;SERVER</span><span style='color:#808030;'>,</span><span style='color:#797997;'>$attribute</span><span style='color:#808030;'>)</span><span style='color:#808030;'>)</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800080;'>}</span><span style='color:#800080;'>;</span>

<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;php</span><span style='color:#000000;'>     </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'PHP&lowbar;SELF'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>   </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0000e6;'>index</span><span style='color:#0f69ff;'>&bsol;.</span><span style='color:#0000e6;'>php</span><span style='color:#808030;'>$</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>   </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'>  </span><span style='color:#696969;'>&sol;&ast; WordPress-Template-engine &ast;&sol;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;admin</span><span style='color:#000000;'>   </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#0000e6;'>wp</span><span style='color:#0f69ff;'>&bsol;-</span><span style='color:#0000e6;'>admin</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'> </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'>  </span><span style='color:#696969;'>&sol;&ast; admin folder &ast;&sol;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;feed</span><span style='color:#000000;'>    </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#0000e6;'>feed</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>&vert;</span><span style='color:#808030;'>&vert;</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#0000e6;'>feed</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;atom</span><span style='color:#000000;'>    </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#0000e6;'>atom</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>&vert;</span><span style='color:#808030;'>&vert;</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#0000e6;'>atom</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>      </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;json</span><span style='color:#000000;'>    </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#0000e6;'>wp</span><span style='color:#0f69ff;'>&bsol;-</span><span style='color:#0000e6;'>json</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>  </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>&vert;</span><span style='color:#808030;'>&vert;</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#0000e6;'>wp</span><span style='color:#0f69ff;'>&bsol;-</span><span style='color:#0000e6;'>json</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>  </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;sitemap</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0000e6;'>sitemap</span><span style='color:#0f69ff;'>&bsol;.</span><span style='color:#0000e6;'>xml</span><span style='color:#808030;'>$</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'> </span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#808030;'>&vert;</span><span style='color:#808030;'>&vert;</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'REDIRECT&lowbar;SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'>  </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0000e6;'>sitemap</span><span style='color:#0f69ff;'>&bsol;.</span><span style='color:#0000e6;'>xml</span><span style='color:#808030;'>$</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'> </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#797997;'>$is&lowbar;article</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>(</span><span style='color:#0000e6;'>'SCRIPT&lowbar;URL'</span><span style='color:#808030;'>,</span><span style='color:#000000;'> </span><span style='color:#0000e6;'>'</span><span style='color:#800000;'>#</span><span style='color:#0f69ff;'>&bsol;&sol;</span><span style='color:#808030;'>$</span><span style='color:#800000;'>#</span><span style='color:#800000;font-weight:bold; '>i</span><span style='color:#0000e6;'>'</span><span style='color:#000000;'>           </span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span><span style='color:#000000;'>  </span><span style='color:#696969;'>&sol;&ast; RISKY! permalink format specific. &ast;&sol;</span>

<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>unset</span><span style='color:#808030;'>(</span><span style='color:#797997;'>$is&lowbar;server&lowbar;val</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>

<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>return</span><span style='color:#000000;'> </span><span style='color:#808030;'>(</span><span style='color:#000000;'>  </span><span style='color:#0f4d75;'>true</span><span style='color:#000000;'>  </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;php</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;admin</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;feed</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;atom</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;json</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;sitemap</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>&amp;</span><span style='color:#808030;'>&amp;</span><span style='color:#000000;'> </span><span style='color:#0f4d75;'>true</span><span style='color:#000000;'>  </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;article</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800080;'>}</span><span style='color:#808030;'>)</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;</span><span style='color:#800000;font-weight:bold; '>if</span><span style='color:#808030;'>(</span><span style='color:#0f4d75;'>false</span><span style='color:#000000;'> </span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#808030;'>=</span><span style='color:#000000;'> </span><span style='color:#797997;'>$is&lowbar;engine&lowbar;ok</span><span style='color:#808030;'>)</span><span style='color:#000000;'> </span><span style='color:#800000;font-weight:bold; '>return</span><span style='color:#800080;'>;</span>
<span style='color:#000000;'>&#xa0;&#xa0;</span><span style='color:#696969;'>&sol;&ast; ---------------------------------------------------------------------------------------------- &ast;&sol;</span>
<span style='color:#5f5035;'>&quest;&gt;</span>
</pre>', 'How To Make Sure Your WordPress Plugin Is Aware Of Where It Is Running, As Early As Possible (Feed, Atom, JSON, WP-Admin, sitemap.xml, Static-Resource