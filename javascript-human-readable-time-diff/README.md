Some time ago, I've wrote an article <sup><a href="https://icompile.eladkarako.com/php-human-readable-time-diff/">iCompile - PHP Human-Readable Time Diff ("5 Hours Ago", "Will Be In A Day",...)</a></sup>,
running the "main action" procedure in a recursive-loop, I could improve the spectrum of the result, so it will include also complex time-periods ("5 hours, 100 milliseconds", "3 years, 12 days", "3 days, 14 seconds", etc...)
among other code improvements :)

<sub>[also available in my github's gist: <a href="https://gist.github.com/eladkarako/65b3b395c5c9d5233f104eceeb7cede4" target="_blank">https://gist.github.com/eladkarako/65b3b395c5c9d5233f104eceeb7cede4</a>]</sub>

<pre><span style='color:#800000; font-weight:bold; '>function</span> human_time_diff<span style='color:#808030; '>(</span>from<span style='color:#808030; '>,</span> to<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span> <span style='color:#696969; '>/*accept unix-datetime integer, Date object or date string, fallback is current date*/</span>
  <span style='color:#800000; '>"</span><span style='color:#0000e6; '>use strict</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>

  <span style='color:#800000; font-weight:bold; '>var</span> now<span style='color:#808030; '>,</span> diff<span style='color:#800080; '>;</span>

  <span style='color:#696969; '>/*---*/</span>
  <span style='color:#800000; font-weight:bold; '>function</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>var</span>
         MINUTE_IN_SECONDS <span style='color:#808030; '>=</span> <span style='color:#008c00; '>60</span>
       <span style='color:#808030; '>,</span> HOUR_IN_SECONDS   <span style='color:#808030; '>=</span> <span style='color:#008c00; '>60</span>  <span style='color:#808030; '>*</span> MINUTE_IN_SECONDS
       <span style='color:#808030; '>,</span> DAY_IN_SECONDS    <span style='color:#808030; '>=</span> <span style='color:#008c00; '>24</span>  <span style='color:#808030; '>*</span> HOUR_IN_SECONDS
       <span style='color:#808030; '>,</span> MONTH_IN_SECONDS  <span style='color:#808030; '>=</span> <span style='color:#008c00; '>30</span>  <span style='color:#808030; '>*</span> DAY_IN_SECONDS
       <span style='color:#808030; '>,</span> YEAR_IN_SECONDS   <span style='color:#808030; '>=</span> <span style='color:#008c00; '>365</span> <span style='color:#808030; '>*</span> DAY_IN_SECONDS
       <span style='color:#808030; '>,</span> since
       <span style='color:#808030; '>,</span> milliseconds<span style='color:#808030; '>,</span> seconds<span style='color:#808030; '>,</span> minutes<span style='color:#808030; '>,</span> hours<span style='color:#808030; '>,</span> days<span style='color:#808030; '>,</span> months<span style='color:#808030; '>,</span> years
       <span style='color:#800080; '>;</span>

    <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span> <span style='color:#808030; '>===</span> diff<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      since <span style='color:#808030; '>=</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>0 seconds</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>else</span> <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>></span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>&amp;&amp;</span> diff <span style='color:#808030; '>&lt;</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      milliseconds <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span>trunc<span style='color:#808030; '>(</span>diff <span style='color:#808030; '>*</span> <span style='color:#008c00; '>1000</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      since <span style='color:#808030; '>=</span> milliseconds <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> <span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>===</span> milliseconds <span style='color:#800080; '>?</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>millisecond</span><span style='color:#800000; '>"</span> <span style='color:#800080; '>:</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>milliseconds</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>else</span> <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>>=</span> <span style='color:#008c00; '>1</span> <span style='color:#808030; '>&amp;&amp;</span> diff <span style='color:#808030; '>&lt;</span> MINUTE_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      seconds <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span>trunc<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      seconds <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>diff<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      since <span style='color:#808030; '>=</span> seconds <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> <span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>===</span> seconds <span style='color:#800080; '>?</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>second</span><span style='color:#800000; '>"</span> <span style='color:#800080; '>:</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>seconds</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      
      diff <span style='color:#808030; '>=</span> diff <span style='color:#808030; '>-</span> <span style='color:#808030; '>(</span>seconds<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>></span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
        since <span style='color:#808030; '>=</span> since <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>, </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>                             <span style='color:#696969; '>/* calculate leftover time, recursively */</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>else</span> <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>>=</span> MINUTE_IN_SECONDS <span style='color:#808030; '>&amp;&amp;</span> diff <span style='color:#808030; '>&lt;</span> HOUR_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      minutes <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span>trunc<span style='color:#808030; '>(</span>diff <span style='color:#808030; '>/</span> MINUTE_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      minutes <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>minutes<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      since <span style='color:#808030; '>=</span> minutes <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> <span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>===</span> minutes <span style='color:#800080; '>?</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>minute</span><span style='color:#800000; '>"</span> <span style='color:#800080; '>:</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>minutes</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      
      diff  <span style='color:#808030; '>=</span> diff <span style='color:#808030; '>-</span> <span style='color:#808030; '>(</span>minutes <span style='color:#808030; '>*</span> MINUTE_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>></span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
        since <span style='color:#808030; '>=</span> since <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>, </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>                             <span style='color:#696969; '>/* calculate leftover time, recursively */</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>else</span> <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>>=</span> HOUR_IN_SECONDS <span style='color:#808030; '>&amp;&amp;</span> diff <span style='color:#808030; '>&lt;</span> DAY_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      hours <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span>trunc<span style='color:#808030; '>(</span>diff <span style='color:#808030; '>/</span> HOUR_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      hours <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>hours<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      since <span style='color:#808030; '>=</span> hours <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> <span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>===</span> hours <span style='color:#800080; '>?</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>hour</span><span style='color:#800000; '>"</span> <span style='color:#800080; '>:</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>hours</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

      diff  <span style='color:#808030; '>=</span> diff <span style='color:#808030; '>-</span> <span style='color:#808030; '>(</span>hours <span style='color:#808030; '>*</span> HOUR_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>></span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
        since <span style='color:#808030; '>=</span> since <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>, </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>                             <span style='color:#696969; '>/* calculate leftover time, recursively */</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>else</span> <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>>=</span> DAY_IN_SECONDS <span style='color:#808030; '>&amp;&amp;</span> diff <span style='color:#808030; '>&lt;</span> MONTH_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      days <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span>trunc<span style='color:#808030; '>(</span>diff <span style='color:#808030; '>/</span> DAY_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      days <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>days<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      since <span style='color:#808030; '>=</span> days <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> <span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>===</span> days <span style='color:#800080; '>?</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>day</span><span style='color:#800000; '>"</span> <span style='color:#800080; '>:</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>days</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

      diff  <span style='color:#808030; '>=</span> diff <span style='color:#808030; '>-</span> <span style='color:#808030; '>(</span>days <span style='color:#808030; '>*</span> DAY_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>></span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
        since <span style='color:#808030; '>=</span> since <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>, </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>                             <span style='color:#696969; '>/* calculate leftover time, recursively */</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>else</span> <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>>=</span> MONTH_IN_SECONDS <span style='color:#808030; '>&amp;&amp;</span> diff <span style='color:#808030; '>&lt;</span> YEAR_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      months <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span>trunc<span style='color:#808030; '>(</span>diff <span style='color:#808030; '>/</span> MONTH_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      months <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>months<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      since <span style='color:#808030; '>=</span> months <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> <span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>===</span> months <span style='color:#800080; '>?</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>month</span><span style='color:#800000; '>"</span> <span style='color:#800080; '>:</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>months</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

      diff  <span style='color:#808030; '>=</span> diff <span style='color:#808030; '>-</span> <span style='color:#808030; '>(</span>months <span style='color:#808030; '>*</span> MONTH_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>></span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
        since <span style='color:#808030; '>=</span> since <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>, </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>                             <span style='color:#696969; '>/* calculate leftover time, recursively */</span>
    <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>else</span> <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>diff <span style='color:#808030; '>>=</span> YEAR_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      years <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span>trunc<span style='color:#808030; '>(</span>diff <span style='color:#808030; '>/</span> YEAR_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      years <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>diff<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      since <span style='color:#808030; '>=</span> years <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> <span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>===</span> years <span style='color:#800080; '>?</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>year</span><span style='color:#800000; '>"</span> <span style='color:#800080; '>:</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>years</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      
      diff  <span style='color:#808030; '>=</span> diff <span style='color:#808030; '>-</span> <span style='color:#808030; '>(</span>years <span style='color:#808030; '>*</span> YEAR_IN_SECONDS<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
      <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>diff <span style='color:#808030; '>></span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
        since <span style='color:#808030; '>=</span> since <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>, </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>                             <span style='color:#696969; '>/* calculate leftover time, recursively */</span>
    <span style='color:#800080; '>}</span>

    <span style='color:#800000; font-weight:bold; '>return</span> since<span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
  <span style='color:#696969; '>/*---*/</span>

  now  <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> <span style='color:#797997; '>Date</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  from <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>number</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#800000; font-weight:bold; '>typeof</span> from<span style='color:#808030; '>)</span>                                                   <span style='color:#800080; '>?</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>from<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>      <span style='color:#800080; '>:</span>
         <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>string</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#800000; font-weight:bold; '>typeof</span> from<span style='color:#808030; '>)</span>                                                   <span style='color:#800080; '>?</span> <span style='color:#797997; '>Number</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>new</span> <span style='color:#797997; '>Date</span><span style='color:#808030; '>(</span>from<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>:</span>
         <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>object</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#800000; font-weight:bold; '>typeof</span> from <span style='color:#808030; '>&amp;&amp;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>date</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> from<span style='color:#808030; '>.</span><span style='color:#797997; '>constructor</span><span style='color:#808030; '>.</span>name<span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>toLowerCase</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>?</span> <span style='color:#797997; '>Number</span><span style='color:#808030; '>(</span>from<span style='color:#808030; '>)</span>           <span style='color:#800080; '>:</span> <span style='color:#797997; '>Number</span><span style='color:#808030; '>(</span>now<span style='color:#808030; '>)</span>
                                                                                      <span style='color:#800080; '>;</span>

  to   <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>number</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#800000; font-weight:bold; '>typeof</span> to<span style='color:#808030; '>)</span>                                                     <span style='color:#800080; '>?</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>max</span><span style='color:#808030; '>(</span>to<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>        <span style='color:#800080; '>:</span>
         <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>string</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#800000; font-weight:bold; '>typeof</span> to<span style='color:#808030; '>)</span>                                                     <span style='color:#800080; '>?</span> <span style='color:#797997; '>Number</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>new</span> <span style='color:#797997; '>Date</span><span style='color:#808030; '>(</span>to<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span>   <span style='color:#800080; '>:</span>
         <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>object</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#800000; font-weight:bold; '>typeof</span> to <span style='color:#808030; '>&amp;&amp;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>date</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> to<span style='color:#808030; '>.</span><span style='color:#797997; '>constructor</span><span style='color:#808030; '>.</span>name<span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>toLowerCase</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span>     <span style='color:#800080; '>?</span> <span style='color:#797997; '>Number</span><span style='color:#808030; '>(</span>to<span style='color:#808030; '>)</span>             <span style='color:#800080; '>:</span> <span style='color:#797997; '>Number</span><span style='color:#808030; '>(</span>now<span style='color:#808030; '>)</span>
  
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>nan</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#797997; '>String</span><span style='color:#808030; '>(</span>from<span style='color:#808030; '>)</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>toLowerCase</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span>  <span style='color:#800000; font-weight:bold; '>throw</span> <span style='color:#800000; font-weight:bold; '>new</span> Error<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>Error While Converting Date (first argument)</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>nan</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>===</span> <span style='color:#797997; '>String</span><span style='color:#808030; '>(</span>to<span style='color:#808030; '>)</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>toLowerCase</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span>    <span style='color:#800000; font-weight:bold; '>throw</span> <span style='color:#800000; font-weight:bold; '>new</span> Error<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>Error While Converting Date (second argument)</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  
  diff <span style='color:#808030; '>=</span> <span style='color:#797997; '>Math</span><span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>abs</span><span style='color:#808030; '>(</span>from <span style='color:#808030; '>-</span> to<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  console<span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>log</span><span style='color:#808030; '>(</span>from<span style='color:#808030; '>,</span>to<span style='color:#808030; '>,</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>return</span> difference<span style='color:#808030; '>(</span>diff<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>


<span style='color:#696969; '>/*</span>
<span style='color:#696969; '>human_time_diff();                                // 0 seconds</span>
<span style='color:#696969; '>human_time_diff("22:15:40");                      // ERROR (invalid date format)</span>
<span style='color:#696969; '>human_time_diff(  Number(new Date()) - 2000  );   // 33 minutes, 20 seconds</span>
<span style='color:#696969; '>human_time_diff( Number(new Date()) - 300 );      // 5 minutes</span>
<span style='color:#696969; '>human_time_diff( Number(new Date()) - 300.123 );  // 5 minutes, 123 milliseconds</span>
<span style='color:#696969; '>*/</span>
</pre>
', 'JavaScript Human-Readable Time Diff ("5 Hours Ago"