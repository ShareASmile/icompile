<pre><span style='color:#5f5035; '>&lt;?php</span><span style='color:#000000; '></span>
<span style='color:#000000; '></span>
<span style='color:#c0bd92; '>/*</span><span style='color:#3f5fbf; '>*</span>
<span style='color:#3f5fbf; '>&#xa0;* </span><span style='color:#005fd2; '>@param</span><span style='color:#3f5fbf; '> </span><span style='color:#bb7977; '>float</span><span style='color:#3f5fbf; '> </span><span style='color:#797997; '>$size</span><span style='color:#3f5fbf; '>                - the memory size to format</span>
<span style='color:#3f5fbf; '>&#xa0;* </span><span style='color:#005fd2; '>@param</span><span style='color:#3f5fbf; '> </span><span style='color:#bb7977; '>bool</span><span style='color:#3f5fbf; '>  </span><span style='color:#797997; '>$is_add_commas</span><span style='color:#3f5fbf; '>       (optional) - saperete every 3 digits from the end so 56789 will be "56,789".</span>
<span style='color:#3f5fbf; '>&#xa0;* </span><span style='color:#005fd2; '>@param</span><span style='color:#3f5fbf; '> </span><span style='color:#bb7977; '>bool</span><span style='color:#3f5fbf; '>  </span><span style='color:#797997; '>$is_full_description</span><span style='color:#3f5fbf; '> (optional) - use *Bytes instead of *b (GigaBytes instead of gb, etc...).</span>
<span style='color:#3f5fbf; '>&#xa0;* </span><span style='color:#005fd2; '>@param</span><span style='color:#3f5fbf; '> </span><span style='color:#bb7977; '>int</span><span style='color:#3f5fbf; '>   </span><span style='color:#797997; '>$digits</span><span style='color:#3f5fbf; '>              (optional) - number of digits decimal point, to limit.</span>
<span style='color:#3f5fbf; '>&#xa0;* </span><span style='color:#005fd2; '>@return</span><span style='color:#3f5fbf; '> </span><span style='color:#bb7977; '>string</span><span style='color:#3f5fbf; '></span>
<span style='color:#3f5fbf; '>&#xa0;</span><span style='color:#c0bd92; '>*/</span><span style='color:#000000; '></span>
<span style='color:#800000; font-weight:bold; '>function</span><span style='color:#000000; '> human_readable_memory_sizes</span><span style='color:#808030; '>(</span><span style='color:#797997; '>$size</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#797997; '>$is_add_commas</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>false</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#797997; '>$is_full_description</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>false</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#797997; '>$digits</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#008c00; '>20</span><span style='color:#808030; '>)</span><span style='color:#000000; '> </span><span style='color:#800080; '>{</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#797997; '>$unit</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#800000; font-weight:bold; '>array</span><span style='color:#808030; '>(</span><span style='color:#0000e6; '>'b'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'kb'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'mb'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'gb'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'tb'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'pb'</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#797997; '>$unit_full</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#800000; font-weight:bold; '>array</span><span style='color:#808030; '>(</span><span style='color:#0000e6; '>'Bytes'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'KiloByte'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'MegaBytes'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'GigaBytes'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'TeraBytes'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>'PetaBytes'</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#797997; '>$out</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#797997; '>$size</span><span style='color:#000000; '> </span><span style='color:#808030; '>/</span><span style='color:#000000; '> </span><span style='color:#400000; '>pow</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>1024</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#808030; '>(</span><span style='color:#797997; '>$i</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#400000; '>floor</span><span style='color:#808030; '>(</span><span style='color:#400000; '>log</span><span style='color:#808030; '>(</span><span style='color:#797997; '>$size</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#008c00; '>1024</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#797997; '>$out</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#400000; '>sprintf</span><span style='color:#808030; '>(</span><span style='color:#0000e6; '>"%."</span><span style='color:#000000; '> </span><span style='color:#808030; '>.</span><span style='color:#000000; '> </span><span style='color:#797997; '>$digits</span><span style='color:#000000; '> </span><span style='color:#808030; '>.</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>"f"</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#797997; '>$out</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#797997; '>$out</span><span style='color:#000000; '> </span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#808030; '>!</span><span style='color:#797997; '>$is_add_commas</span><span style='color:#000000; '> </span><span style='color:#800080; '>?</span><span style='color:#000000; '> </span><span style='color:#797997; '>$out</span><span style='color:#000000; '> </span><span style='color:#800080; '>:</span><span style='color:#000000; '> </span><span style='color:#400000; '>preg_replace_callback</span><span style='color:#808030; '>(</span><span style='color:#0000e6; '>'</span><span style='color:#800000; '>/</span><span style='color:#808030; '>(</span><span style='color:#797997; '>\\d</span><span style='color:#808030; '>)</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>?=</span><span style='color:#808030; '>(</span><span style='color:#797997; '>\\d</span><span style='color:#808030; '>{</span><span style='color:#008c00; '>3</span><span style='color:#808030; '>}</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span><span style='color:#808030; '>$</span><span style='color:#808030; '>)</span><span style='color:#800000; '>/</span><span style='color:#0000e6; '>'</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#800000; font-weight:bold; '>function</span><span style='color:#000000; '> </span><span style='color:#808030; '>(</span><span style='color:#797997; '>$arr</span><span style='color:#808030; '>)</span><span style='color:#000000; '> </span><span style='color:#800080; '>{</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000; font-weight:bold; '>return</span><span style='color:#000000; '> </span><span style='color:#800000; font-weight:bold; '>isset</span><span style='color:#808030; '>(</span><span style='color:#797997; '>$arr</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#000000; '> </span><span style='color:#800080; '>?</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>"</span><span style='color:#797997; '>$arr</span><span style='color:#0000e6; '>[0],"</span><span style='color:#000000; '> </span><span style='color:#800080; '>:</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>""</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#800080; '>}</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#797997; '>$out</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#797997; '>$out</span><span style='color:#000000; '> </span><span style='color:#808030; '>.</span><span style='color:#808030; '>=</span><span style='color:#000000; '> </span><span style='color:#0000e6; '>' '</span><span style='color:#000000; '> </span><span style='color:#808030; '>.</span><span style='color:#000000; '> </span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span><span style='color:#797997; '>$is_full_description</span><span style='color:#000000; '> </span><span style='color:#800080; '>?</span><span style='color:#000000; '> </span><span style='color:#797997; '>$unit</span><span style='color:#808030; '>[</span><span style='color:#000000; '> </span><span style='color:#797997; '>$i</span><span style='color:#000000; '> </span><span style='color:#808030; '>]</span><span style='color:#000000; '> </span><span style='color:#800080; '>:</span><span style='color:#000000; '> </span><span style='color:#797997; '>$unit_full</span><span style='color:#808030; '>[</span><span style='color:#000000; '> </span><span style='color:#797997; '>$i</span><span style='color:#000000; '> </span><span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;</span><span style='color:#800000; font-weight:bold; '>return</span><span style='color:#000000; '> </span><span style='color:#797997; '>$out</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#800080; '>}</span><span style='color:#000000; '></span>
</pre>


running the following code-lines:
<pre><span style='color:#5f5035; '>&lt;?php</span><span style='color:#000000; '></span>
<span style='color:#400000; '>var_dump</span><span style='color:#808030; '>(</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;human_readable_memory_sizes</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>982114171659876</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;human_readable_memory_sizes</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>982114171659876</span><span style='color:#808030; '>,</span><span style='color:#696969; '>/*is add commas=*/</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>true</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;human_readable_memory_sizes</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>982114171659876</span><span style='color:#808030; '>,</span><span style='color:#696969; '>/*is add commas=*/</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>true</span><span style='color:#808030; '>,</span><span style='color:#000000; '>   </span><span style='color:#696969; '>/*is full description=*/</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>true</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;human_readable_memory_sizes</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>982114171659876</span><span style='color:#808030; '>,</span><span style='color:#696969; '>/*is add commas=*/</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>false</span><span style='color:#808030; '>,</span><span style='color:#000000; '>  </span><span style='color:#696969; '>/*is full description=*/</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>true</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span><span style='color:#000000; '></span>
<span style='color:#000000; '>&#xa0;&#xa0;human_readable_memory_sizes</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>982114171659876</span><span style='color:#808030; '>,</span><span style='color:#696969; '>/*is add commas=*/</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>false</span><span style='color:#808030; '>,</span><span style='color:#000000; '>  </span><span style='color:#696969; '>/*is full description=*/</span><span style='color:#000000; '> </span><span style='color:#0f4d75; '>true</span><span style='color:#808030; '>,</span><span style='color:#000000; '> </span><span style='color:#696969; '>/*digits limit=*/</span><span style='color:#000000; '> </span><span style='color:#008c00; '>3</span><span style='color:#808030; '>)</span><span style='color:#000000; '></span>
<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#000000; '></span>
<span style='color:#5f5035; '>?></span>
</pre>

will render the following results:
<pre>
<small>string</small> <font color='#cc0000'>'893.22763566076537244953 tb'</font> <i>(length=27)</i>
<small>string</small> <font color='#cc0000'>'893.22,763,566,076,537,244,953 tb'</font> <i>(length=33)</i>
<small>string</small> <font color='#cc0000'>'893.22,763,566,076,537,244,953 TeraBytes'</font> <i>(length=40)</i>
<small>string</small> <font color='#cc0000'>'893.22763566076537244953 TeraBytes'</font> <i>(length=34)</i>
<small>string</small> <font color='#cc0000'>'893.228 TeraBytes'</font> <i>(length=17)</i>
</pre>', 'PHP Snippet - A Human-Readable Memory-Formatter